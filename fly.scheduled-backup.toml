# Fly.io configuration for scheduled daily backups
# Deploy with: flyctl deploy --config fly.scheduled-backup.toml

app = 'pathsixsolutions-backend-backup'
primary_region = 'ord'

[build]
  dockerfile = 'Dockerfile'

[vm]
  memory = '512mb'
  cpu_kind = 'shared'
  cpus = 1

[env]
  # Script will use secrets from parent app

# Run daily at 2 AM UTC (9 PM EST / 6 PM PST)
[processes]
  backup = '/venv/bin/python scripts/run_scheduled_backup.py'

# Schedule: daily at 2:00 AM UTC
[[services]]
  processes = ['backup']
  schedule = '0 2 * * *'  # cron format: minute hour day month weekday